update order:

-update input permissions
-add inputs
-update player state


should:
-pass in larger state slices rather than individual values (since they are guaranteed not to be mutated)
-move as much mid-update state parsing into functions as possible, and call multiple times instead of storing in variables
-update values in place where possible at end of update loop

